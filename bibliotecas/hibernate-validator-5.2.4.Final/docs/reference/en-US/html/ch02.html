<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Declaring and validating bean constraints</title><link rel="stylesheet" type="text/css" href="css/hibernate.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><link rel="home" href="index.html" title="Hibernate Validator 5.2.4.Final"/><link rel="up" href="index.html" title="Hibernate Validator 5.2.4.Final"/><link rel="prev" href="ch01.html" title="Chapter 1. Getting started"/><link rel="next" href="ch03.html" title="Chapter 3. Declaring and validating method constraints"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="ch01.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="ch03.html"><strong>Next</strong></a></li></ul><div class="chapter" title="Chapter 2. Declaring and validating bean constraints"><div class="titlepage"><div><div><h2 class="title"><a id="chapter-bean-constraints"/>Chapter 2. Declaring and validating bean constraints</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch02.html#section-declaring-bean-constraints">2.1. Declaring bean constraints</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#_field_level_constraints">2.1.1. Field-level constraints</a></span></dt><dt><span class="section"><a href="ch02.html#_property_level_constraints">2.1.2. Property-level constraints</a></span></dt><dt><span class="section"><a href="ch02.html#type-arguments-constraints">2.1.3. Type argument constraints</a></span></dt><dt><span class="section"><a href="ch02.html#validator-usingvalidator-classlevel">2.1.4. Class-level constraints</a></span></dt><dt><span class="section"><a href="ch02.html#section-constraint-inheritance">2.1.5. Constraint inheritance</a></span></dt><dt><span class="section"><a href="ch02.html#section-object-graph-validation">2.1.6. Object graphs</a></span></dt></dl></dd><dt><span class="section"><a href="ch02.html#section-validating-bean-constraints">2.2. Validating bean constraints</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#section-obtaining-validator">2.2.1. Obtaining a <code class="literal">Validator</code> instance</a></span></dt><dt><span class="section"><a href="ch02.html#_validator_methods">2.2.2. Validator methods</a></span></dt><dt><span class="section"><a href="ch02.html#section-constraint-violation-methods">2.2.3. <code class="literal">ConstraintViolation</code> methods</a></span></dt></dl></dd><dt><span class="section"><a href="ch02.html#section-builtin-constraints">2.3. Built-in constraints</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#validator-defineconstraints-spec">2.3.1. Bean Validation constraints</a></span></dt><dt><span class="section"><a href="ch02.html#validator-defineconstraints-hv-constraints">2.3.2. Additional constraints</a></span></dt></dl></dd></dl></div><p>In this chapter you will learn how to declare (see <a class="xref" href="ch02.html#section-declaring-bean-constraints" title="2.1. Declaring bean constraints">Section 2.1, “Declaring bean constraints”</a>) and
validate (see <a class="xref" href="ch02.html#section-validating-bean-constraints" title="2.2. Validating bean constraints">Section 2.2, “Validating bean constraints”</a>) bean constraints.
<a class="xref" href="ch02.html#section-builtin-constraints" title="2.3. Built-in constraints">Section 2.3, “Built-in constraints”</a> provides an overview of all built-in constraints coming with
Hibernate Validator.</p><p>If you are interested in applying constraints to method parameters and return values, refer to
<a class="xref" href="ch03.html" title="Chapter 3. Declaring and validating method constraints">Chapter 3, <em>Declaring and validating method constraints</em></a>.</p><div class="section" title="2.1. Declaring bean constraints"><div class="titlepage"><div><div><h2 class="title"><a id="section-declaring-bean-constraints"/>2.1. Declaring bean constraints</h2></div></div></div><p>Constraints in Bean Validation are expressed via Java annotations. In this section you will learn
how to enhance an object model with these annotations. There are the following three types of bean
constraints:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">field constraints</li><li class="listitem">property constraints</li><li class="listitem">class constraints</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Not all constraints can be placed on all of these levels. In fact, none of the default constraints
defined by Bean Validation can be placed at class level. The <code class="literal">java.lang.annotation.Target</code> annotation
in the constraint annotation itself determines on which elements a constraint can be placed. See
<a class="xref" href="ch06.html" title="Chapter 6. Creating custom constraints">Chapter 6, <em>Creating custom constraints</em></a> for more information.</p></div><div class="section" title="2.1.1. Field-level constraints"><div class="titlepage"><div><div><h3 class="title"><a id="_field_level_constraints"/>2.1.1. Field-level constraints</h3></div></div></div><p>Constraints can be expressed by annotating a field of a class. <a class="xref" href="ch02.html#example-field-level" title="Example 2.1. Field-level constraints">Example 2.1, “Field-level constraints”</a> shows a field
level configuration example:</p><div class="example"><a id="example-field-level"/><p class="title"><strong>Example 2.1. Field-level constraints</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.fieldlevel;

public class Car {

	@NotNull
	private String manufacturer;

	@AssertTrue
	private boolean isRegistered;

	public Car(String manufacturer, boolean isRegistered) {
		this.manufacturer = manufacturer;
		this.isRegistered = isRegistered;
	}

	//getters and setters...
}</code></pre></div></div><br class="example-break"/><p>When using field-level constraints field access strategy is used to access the value to be
validated. This means the validation engine directly accesses the instance variable and does not
invoke the property accessor method even if such an accessor exists.</p><p>Constraints can be applied to fields of any access type (public, private etc.). Constraints on
static fields are not supported, though.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p>When validating byte code enhanced objects property level constraints should be used, because the
byte code enhancing library won’t be able to determine a field access via reflection.</p></div></div><div class="section" title="2.1.2. Property-level constraints"><div class="titlepage"><div><div><h3 class="title"><a id="_property_level_constraints"/>2.1.2. Property-level constraints</h3></div></div></div><p>If your model class adheres to the
<a class="link" href="http://java.sun.com/javase/technologies/desktop/javabeans/index.jsp">JavaBeans</a> standard, it
is also possible to annotate the properties of a bean class instead of its fields.
<a class="xref" href="ch02.html#example-property-level" title="Example 2.2. Property-level constraints">Example 2.2, “Property-level constraints”</a> uses the same entity as in <a class="xref" href="ch02.html#example-field-level" title="Example 2.1. Field-level constraints">Example 2.1, “Field-level constraints”</a>, however, property level
constraints are used.</p><div class="example"><a id="example-property-level"/><p class="title"><strong>Example 2.2. Property-level constraints</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.propertylevel;

public class Car {

	private String manufacturer;

	private boolean isRegistered;

	public Car(String manufacturer, boolean isRegistered) {
		this.manufacturer = manufacturer;
		this.isRegistered = isRegistered;
	}

	@NotNull
	public String getManufacturer() {
		return manufacturer;
	}

	public void setManufacturer(String manufacturer) {
		this.manufacturer = manufacturer;
	}

	@AssertTrue
	public boolean isRegistered() {
		return isRegistered;
	}

	public void setRegistered(boolean isRegistered) {
		this.isRegistered = isRegistered;
	}
}</code></pre></div></div><br class="example-break"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The property’s getter method has to be annotated, not its setter. That way also read-only properties
can be constrained which have no setter method.</p></div><p>When using property level constraints property access strategy is used to access the value to be
validated, i.e. the validation engine accesses the state via the property accessor method.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p>It is recommended to stick either to field <span class="emphasis"><em>or</em></span> property annotations within one class. It is not
recommended to annotate a field <span class="emphasis"><em>and</em></span> the accompanying getter method as this would cause the field
to be validated twice.</p></div></div><div class="section" title="2.1.3. Type argument constraints"><div class="titlepage"><div><div><h3 class="title"><a id="type-arguments-constraints"/>2.1.3. Type argument constraints</h3></div></div></div><p>Starting from Java 8, it is possible to specify constraints directly on the type argument of a
parameterized type. However, this requires that <code class="literal">ElementType.TYPE_USE</code> is specified via <code class="literal">@Target</code>
in the constraint definition. To maintain backwards compatibility, built-in Bean Validation as well as
Hibernate Validator specific constraints do not yet specify <code class="literal">ElementType.TYPE_USE</code>. To make use of
type argument constraints, custom constraints must be used (see <a class="xref" href="ch06.html" title="Chapter 6. Creating custom constraints">Chapter 6, <em>Creating custom constraints</em></a>).</p><p>Hibernate Validator validates type arguments constraints specified on collections, map values,
<code class="literal">java.util.Optional</code>, and custom parameterized types.</p><div class="section" title="2.1.3.1. With Iterable"><div class="titlepage"><div><div><h4 class="title"><a id="_with_literal_iterable_literal"/>2.1.3.1. With <code class="literal">Iterable</code></h4></div></div></div><p>When applying constraints on an <code class="literal">Iterable</code> type argument, Hibernate Validator will validate each
element. <a class="xref" href="ch02.html#example-type-arguments-constraints-collections" title="Example 2.3. Type argument constraint on List">Example 2.3, “Type argument constraint on <code class="literal">List</code>”</a> shows an example of a
<code class="literal">List</code> with a type argument constraint.</p><div class="example"><a id="example-type-arguments-constraints-collections"/><p class="title"><strong>Example 2.3. Type argument constraint on <code class="literal">List</code></strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class Car {

	@Valid
	private List&lt;@ValidPart String&gt; parts = new ArrayList&lt;&gt;();

	public void addPart(String part) {
		parts.add( part );
	}

	//...
}</code></pre><pre><code class="language-java">Car car = Car();
car.addPart( "Wheel" );
car.addPart( null );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );

assertEquals( 1, constraintViolations.size() );
assertEquals(
		"'null' is not a valid car part.",
		constraintViolations.iterator().next().getMessage()
);
assertEquals( "parts[1]", constraintViolations.iterator().next().getPropertyPath().toString() );</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.1.3.2. With Map"><div class="titlepage"><div><div><h4 class="title"><a id="_with_literal_map_literal"/>2.1.3.2. With <code class="literal">Map</code></h4></div></div></div><p>Type argument constraints are also validated for map values. Constraints on the key are ignored.
<a class="xref" href="ch02.html#example-type-arguments-constraints-map" title="Example 2.4. Type argument constraint on maps">Example 2.4, “Type argument constraint on maps”</a> shows an example of a <code class="literal">Map</code> value with a type
argument constraint.</p><div class="example"><a id="example-type-arguments-constraints-map"/><p class="title"><strong>Example 2.4. Type argument constraint on maps</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class Car {

	public static enum FuelConsumption {
		CITY,
		HIGHWAY
	}

	@Valid
	private EnumMap&lt;FuelConsumption, @MaxAllowedFuelConsumption Integer&gt; fuelConsumption = new EnumMap&lt;&gt;( FuelConsumption.class );

	public void setFuelConsumption(FuelConsumption consumption, int value) {
		fuelConsumption.put( consumption, value );
	}

    //...
}</code></pre><pre><code class="language-java">Car car = new Car();
car.setFuelConsumption( Car.FuelConsumption.HIGHWAY, 20 );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );

assertEquals( 1, constraintViolations.size() );
assertEquals( "20 is outside the max fuel consumption.", constraintViolations.iterator().next().getMessage() );</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.1.3.3. With java.util.Optional"><div class="titlepage"><div><div><h4 class="title"><a id="_with_literal_java_util_optional_literal"/>2.1.3.3. With <code class="literal">java.util.Optional</code></h4></div></div></div><p>When applying a constraint on the type argument of <code class="literal">Optional</code>, Hibernate Validator will automatically
unwrap the type and validate the internal value. <a class="xref" href="ch02.html#example-type-arguments-constraints-optional" title="Example 2.5. Type argument constraint on Optional">Example 2.5, “Type argument constraint on Optional”</a> shows
an example of an <code class="literal">Optional</code> with a type argument constraint.</p><div class="example"><a id="example-type-arguments-constraints-optional"/><p class="title"><strong>Example 2.5. Type argument constraint on Optional</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

import java.util.ArrayList;
import java.util.EnumMap;
import java.util.List;
import java.util.Optional;
import javax.validation.Valid;

public class Car {

	private Optional&lt;@MinTowingCapacity(1000) Integer&gt; towingCapacity = Optional.empty();

	public void setTowingCapacity(Integer alias) {
		towingCapacity = Optional.of( alias );
	}

    //...
}</code></pre><pre><code class="language-java">Car car = Car();
car.setTowingCapacity( 100 );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );

assertEquals( 1, constraintViolations.size() );
assertEquals( "Not enough towing capacity.", constraintViolations.iterator().next().getMessage() );
assertEquals( "towingCapacity", constraintViolations.iterator().next().getPropertyPath().toString() );</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.1.3.4. With custom parameterized types"><div class="titlepage"><div><div><h4 class="title"><a id="_with_custom_parameterized_types"/>2.1.3.4. With custom parameterized types</h4></div></div></div><p>Type arguments constraints can with two restrictions also be used with custom types. First, a
<code class="literal">ValidatedValueUnwrapper</code> must be registered for the custom type allowing to retrieve
the value to validate (see <a class="xref" href="ch11.html#section-value-handling" title="11.11. Unwrapping values">Section 11.11, “Unwrapping values”</a>). Second, only types with one type arguments
are supported. Parameterized types with two or more type arguments are not checked for type argument
constraints. This limitation might change in future versions.</p><p><a class="xref" href="ch02.html#example-type-arguments-constraints-custom-parameterized-type" title="Example 2.6. Type argument constraint on custom parameterized type">Example 2.6, “Type argument constraint on custom parameterized type”</a> shows an example of a custom
parameterized type with a type argument constraint.</p><div class="example"><a id="example-type-arguments-constraints-custom-parameterized-type"/><p class="title"><strong>Example 2.6. Type argument constraint on custom parameterized type</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class Car {

	private GearBox&lt;@MinTorque(100) Gear&gt; gearBox;

	public void setGearBox(GearBox&lt;Gear&gt; gearBox) {
		this.gearBox = gearBox;
	}

	//...
}</code></pre><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class GearBox&lt;T extends Gear&gt; {

	private final T gear;

	public GearBox(T gear) {
		this.gear = gear;
	}

	public Gear getGear() {
		return this.gear;
	}
}</code></pre><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class Gear {
	private final Integer torque;

	public Gear(Integer torque) {
		this.torque = torque;
	}

	public Integer getTorque() {
		return torque;
	}

	public static class AcmeGear extends Gear {
		public AcmeGear() {
			super( 100 );
		}
	}
}</code></pre><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.typeargument;

public class GearBoxUnwrapper extends ValidatedValueUnwrapper&lt;GearBox&gt; {
	@Override
	public Object handleValidatedValue(GearBox gearBox) {
		return gearBox == null ? null : gearBox.getGear();
	}

	@Override
	public Type getValidatedValueType(Type valueType) {
		return Gear.class;
	}
}</code></pre><pre><code class="language-java">Car car = Car();
car.setGearBox( new GearBox&lt;&gt;( new Gear.AcmeGear() ) );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );
assertEquals( 1, constraintViolations.size() );
assertEquals( "Gear is not providing enough torque.", constraintViolations.iterator().next().getMessage() );
assertEquals( "gearBox", constraintViolations.iterator().next().getPropertyPath().toString() );</code></pre></div></div><br class="example-break"/></div></div><div class="section" title="2.1.4. Class-level constraints"><div class="titlepage"><div><div><h3 class="title"><a id="validator-usingvalidator-classlevel"/>2.1.4. Class-level constraints</h3></div></div></div><p>Last but not least, a constraint can also be placed on the class level. In this case not a single
property is subject of the validation but the complete object. Class-level constraints are useful if
the validation depends on a correlation between several properties of an object.</p><p>The Car class in <a class="xref" href="ch02.html#example-class-level" title="Example 2.7. Class-level constraint">Example 2.7, “Class-level constraint”</a> has the two attributes <code class="literal">seatCount</code> and <code class="literal">passengers</code> and it
should be ensured that the list of passengers has not more entries than seats are available. For
that purpose the <code class="literal">@ValidPassengerCount</code> constraint is added on the class level. The validator of that
constraint has access to the complete <code class="literal">Car</code> object, allowing to compare the numbers of seats and
passengers.</p><p>Refer to <a class="xref" href="ch06.html#section-class-level-constraints" title="6.2. Class-level constraints">Section 6.2, “Class-level constraints”</a> to learn in detail how to implement this custom
constraint.</p><div class="example"><a id="example-class-level"/><p class="title"><strong>Example 2.7. Class-level constraint</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.classlevel;

@ValidPassengerCount
public class Car {

	private int seatCount;

	private List&lt;Person&gt; passengers;

	//...
}</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.1.5. Constraint inheritance"><div class="titlepage"><div><div><h3 class="title"><a id="section-constraint-inheritance"/>2.1.5. Constraint inheritance</h3></div></div></div><p>When a class implements an interface or extends another class, all constraint annotations declared
on the super-type apply in the same manner as the constraints specified on the class itself. To make
things clearer let’s have a look at the following example:</p><div class="example"><a id="d0e598"/><p class="title"><strong>Example 2.8. Constraint inheritance</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.inheritance;

public class Car {

	private String manufacturer;

	@NotNull
	public String getManufacturer() {
		return manufacturer;
	}

	//...
}</code></pre><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.inheritance;

public class RentalCar extends Car {

	private String rentalStation;

	@NotNull
	public String getRentalStation() {
		return rentalStation;
	}

	//...
}</code></pre></div></div><br class="example-break"/><p>Here the class <code class="literal">RentalCar</code> is a subclass of <code class="literal">Car</code> and adds the property <code class="literal">rentalStation</code>. If an instance of
<code class="literal">RentalCar</code> is validated, not only the <code class="literal">@NotNull</code> constraint on <code class="literal">rentalStation</code> is evaluated, but also the
constraint on <code class="literal">manufacturer</code> from the parent class.</p><p>The same would be true, if <code class="literal">Car</code> was not a superclass but an interface implemented by <code class="literal">RentalCar</code>.</p><p>Constraint annotations are aggregated if methods are overridden. So if <code class="literal">RentalCar</code> overrode the
<code class="literal">getManufacturer()</code> method from <code class="literal">Car</code>, any constraints annotated at the overriding method would be
evaluated in addition to the <code class="literal">@NotNull</code> constraint from the superclass.</p></div><div class="section" title="2.1.6. Object graphs"><div class="titlepage"><div><div><h3 class="title"><a id="section-object-graph-validation"/>2.1.6. Object graphs</h3></div></div></div><p>The Bean Validation API does not only allow to validate single class instances but also complete
object graphs (cascaded validation). To do so, just annotate a field or property representing a
reference to another object with <code class="literal">@Valid</code> as demonstrated in <a class="xref" href="ch02.html#example-cascaded-validation" title="Example 2.9. Cascaded validation">Example 2.9, “Cascaded validation”</a>.</p><div class="example"><a id="example-cascaded-validation"/><p class="title"><strong>Example 2.9. Cascaded validation</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.objectgraph;

public class Car {

	@NotNull
	@Valid
	private Person driver;

	//...
}</code></pre><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.objectgraph;

public class Person {

	@NotNull
	private String name;

	//...
}</code></pre></div></div><br class="example-break"/><p>If an instance of <code class="literal">Car</code> is validated, the referenced <code class="literal">Person</code> object will be validated as well, as the
<code class="literal">driver</code> field is annotated with <code class="literal">@Valid</code>. Therefore the validation of a <code class="literal">Car</code> will fail if the <code class="literal">name</code> field
of the referenced <code class="literal">Person</code> instance is <code class="literal">null</code>.</p><p>The validation of object graphs is recursive, i.e. if a reference marked for cascaded validation
points to an object which itself has properties annotated with <code class="literal">@Valid</code>, these references will be
followed up by the validation engine as well. The validation engine will ensure that no infinite
loops occur during cascaded validation, for example if two objects hold references to each other.</p><p>Note that <code class="literal">null</code> values are getting ignored during cascaded validation.</p><p>Object graph validation also works for collection-typed fields. That means any attributes that</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">are arrays</li><li class="listitem">implement <code class="literal">java.lang.Iterable</code> (especially <code class="literal">Collection</code>, <code class="literal">List</code> and <code class="literal">Set</code>)</li><li class="listitem">implement <code class="literal">java.util.Map</code></li></ul></div><p>can be annotated with <code class="literal">@Valid</code>, which will cause each contained element to be validated, when the
parent object is validated.</p><div class="example"><a id="example-cascaded-validation-list"/><p class="title"><strong>Example 2.10. Cascaded validation of a collection</strong></p><div class="example-contents"><pre><code class="language-java">package org.hibernate.validator.referenceguide.chapter02.objectgraph.list;

public class Car {

	@NotNull
	@Valid
	private List&lt;Person&gt; passengers = new ArrayList&lt;Person&gt;();

	//...
}</code></pre></div></div><br class="example-break"/><p>So when validating an instance of the <code class="literal">Car</code> class shown in <a class="xref" href="ch02.html#example-cascaded-validation-list" title="Example 2.10. Cascaded validation of a collection">Example 2.10, “Cascaded validation of a collection”</a>, a
<code class="literal">ConstraintViolation</code> will be created, if any of the <code class="literal">Person</code> objects contained in the passengers list
has a <code class="literal">null</code> name.</p></div></div><div class="section" title="2.2. Validating bean constraints"><div class="titlepage"><div><div><h2 class="title"><a id="section-validating-bean-constraints"/>2.2. Validating bean constraints</h2></div></div></div><p>The <code class="literal">Validator</code> interface is the most important object in Bean Validation. The next section shows how
to obtain an <code class="literal">Validator</code> instance. Afterwards you’ll learn how to use the different methods of the
<code class="literal">Validator</code> interface.</p><div class="section" title="2.2.1. Obtaining a Validator instance"><div class="titlepage"><div><div><h3 class="title"><a id="section-obtaining-validator"/>2.2.1. Obtaining a <code class="literal">Validator</code> instance</h3></div></div></div><p>The first step towards validating an entity instance is to get hold of a <code class="literal">Validator</code> instance. The
road to this instance leads via the <code class="literal">Validation</code> class and a <code class="literal">ValidatorFactory</code>. The easiest way is to
use the static method <code class="literal">Validation#buildDefaultValidatorFactory()</code>:</p><div class="example"><a id="d0e789"/><p class="title"><strong>Example 2.11. <code class="literal">Validation#buildDefaultValidatorFactory()</code></strong></p><div class="example-contents"><pre><code class="language-java">ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
Validator validator = factory.getValidator();</code></pre></div></div><br class="example-break"/><p>This bootstraps a validator in the default configuration. Refer to <a class="xref" href="ch08.html" title="Chapter 8. Bootstrapping">Chapter 8, <em>Bootstrapping</em></a> to
learn more about the different bootstrapping methods and how to obtain a specifically configured
<code class="literal">Validator</code> instance.</p></div><div class="section" title="2.2.2. Validator methods"><div class="titlepage"><div><div><h3 class="title"><a id="_validator_methods"/>2.2.2. Validator methods</h3></div></div></div><p>The <code class="literal">Validator</code> interface contains three methods that can be used to either validate entire entities
or just single properties of the entity.</p><p>All three methods return a <code class="literal">Set&lt;ConstraintViolation&gt;</code>. The set is empty, if the validation succeeds.
Otherwise a <code class="literal">ConstraintViolation</code> instance is added for each violated constraint.</p><p>All the validation methods have a var-args parameter which can be used to specify, which validation
groups shall be considered when performing the validation. If the parameter is not specified the
default validation group (<code class="literal">javax.validation.groups.Default</code>) is used. The topic of validation groups
is discussed in detail in <a class="xref" href="ch05.html" title="Chapter 5. Grouping constraints">Chapter 5, <em>Grouping constraints</em></a>.</p><div class="section" title="2.2.2.1. Validator#validate()"><div class="titlepage"><div><div><h4 class="title"><a id="__literal_validator_validate_literal"/>2.2.2.1. <code class="literal">Validator#validate()</code></h4></div></div></div><p>Use the <code class="literal">validate()</code> method to perform validation of all constraints of a given bean.
<a class="xref" href="ch02.html#example-validator-validate" title="Example 2.12. Using Validator#validate()">Example 2.12, “Using <code class="literal">Validator#validate()</code>”</a> shows the validation of an instance of the <code class="literal">Car</code> class from
<a class="xref" href="ch02.html#example-property-level" title="Example 2.2. Property-level constraints">Example 2.2, “Property-level constraints”</a> which fails to satisfy the <code class="literal">@NotNull</code> constraint on the <code class="literal">manufacturer</code>
property. The validation call therefore returns one <code class="literal">ConstraintViolation</code> object.</p><div class="example"><a id="example-validator-validate"/><p class="title"><strong>Example 2.12. Using <code class="literal">Validator#validate()</code></strong></p><div class="example-contents"><pre><code class="language-java">Car car = new Car( null, true );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );

assertEquals( 1, constraintViolations.size() );
assertEquals( "may not be null", constraintViolations.iterator().next().getMessage() );</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.2.2.2. Validator#validateProperty()"><div class="titlepage"><div><div><h4 class="title"><a id="__literal_validator_validateproperty_literal"/>2.2.2.2. <code class="literal">Validator#validateProperty()</code></h4></div></div></div><p>With help of the <code class="literal">validateProperty()</code> you can validate a single named property of a given object. The
property name is the JavaBeans property name.</p><div class="example"><a id="d0e866"/><p class="title"><strong>Example 2.13. Using <code class="literal">Validator#validateProperty()</code></strong></p><div class="example-contents"><pre><code class="language-java">Car car = new Car( null, true );

Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validateProperty(
		car,
		"manufacturer"
);

assertEquals( 1, constraintViolations.size() );
assertEquals( "may not be null", constraintViolations.iterator().next().getMessage() );</code></pre></div></div><br class="example-break"/></div><div class="section" title="2.2.2.3. Validator#validateValue()"><div class="titlepage"><div><div><h4 class="title"><a id="__literal_validator_validatevalue_literal"/>2.2.2.3. <code class="literal">Validator#validateValue()</code></h4></div></div></div><p>By using the <code class="literal">validateValue()</code> method you can check whether a single property of a given class can be
validated successfully, if the property had the specified value:</p><div class="example"><a id="d0e882"/><p class="title"><strong>Example 2.14. Using <code class="literal">Validator#validateValue()</code></strong></p><div class="example-contents"><pre><code class="language-java">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validateValue(
		Car.class,
		"manufacturer",
		null
);

assertEquals( 1, constraintViolations.size() );
assertEquals( "may not be null", constraintViolations.iterator().next().getMessage() );
---</code></pre></div></div><br class="example-break"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p><code class="literal">@Valid</code> is not honored by <code class="literal">validateProperty()</code> or <code class="literal">validateValue()</code>.</p></div><p><code class="literal">Validator#validateProperty()</code> is for example used in the integration of Bean Validation into JSF 2
(see <a class="xref" href="ch10.html#section-presentation-layer" title="10.2. JSF &amp; Seam">Section 10.2, “JSF &amp; Seam”</a>) to perform a validation of the values entered into a form
before they are propagated to the model.</p></div></div><div class="section" title="2.2.3. ConstraintViolation methods"><div class="titlepage"><div><div><h3 class="title"><a id="section-constraint-violation-methods"/>2.2.3. <code class="literal">ConstraintViolation</code> methods</h3></div></div></div><p>Now it is time to have a closer look at what a <code class="literal">ConstraintViolation</code> is. Using the different methods
of <code class="literal">ConstraintViolation</code> a lot of useful information about the cause of the validation failure can be
determined. <a class="xref" href="ch02.html#table-constraint-violation" title="Table 2.1. The various ConstraintViolation methods">Table 2.1, “The various <code class="literal">ConstraintViolation</code> methods”</a> gives an overview of these methods. The values in the
"Example" column refer to <a class="xref" href="ch02.html#example-validator-validate" title="Example 2.12. Using Validator#validate()">Example 2.12, “Using <code class="literal">Validator#validate()</code>”</a>.</p><div class="table"><a id="table-constraint-violation"/><p class="title"><strong>Table 2.1. The various <code class="literal">ConstraintViolation</code> methods</strong></p><div class="table-contents"><table summary="The various ConstraintViolation methods" border="1"><colgroup><col width="33*" class="col_1"/><col width="33*" class="col_2"/><col width="33*" class="col_3"/></colgroup><thead><tr><th align="left" valign="top">Method</th><th align="left" valign="top">Usage</th><th align="left" valign="top">Example</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">getMessage()</code></p></td><td align="left" valign="top"><p>The interpolated error message</p></td><td align="left" valign="top"><p>"may not be null"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getMessageTemplate()</code></p></td><td align="left" valign="top"><p>The non-interpolated error message</p></td><td align="left" valign="top"><p>"{…​ NotNull.message}"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getRootBean()</code></p></td><td align="left" valign="top"><p>The root bean being validated</p></td><td align="left" valign="top"><p>car</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getRootBeanClass()</code></p></td><td align="left" valign="top"><p>The class of the root bean being validated</p></td><td align="left" valign="top"><p><code class="literal">Car.class</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getLeafBean()</code></p></td><td align="left" valign="top"><p>If a bean constraint, the bean instance the constraint is
              applied on; If a property constraint, the bean instance hosting
              the property the constraint is applied on</p></td><td align="left" valign="top"><p><code class="literal">car</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getPropertyPath()</code></p></td><td align="left" valign="top"><p>The property path to the validated value from root
              bean</p></td><td align="left" valign="top"><p>contains one node with kind
              <code class="literal">PROPERTY</code> and name "manufacturer"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getInvalidValue()</code></p></td><td align="left" valign="top"><p>The value failing to pass the constraint</p></td><td align="left" valign="top"><p><code class="literal">null</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">getConstraintDescriptor()</code></p></td><td align="left" valign="top"><p>Constraint metadata reported to fail</p></td><td align="left" valign="top"><p>descriptor for <code class="literal">@NotNull</code></p></td></tr></tbody></table></div></div><br class="table-break"/></div></div><div class="section" title="2.3. Built-in constraints"><div class="titlepage"><div><div><h2 class="title"><a id="section-builtin-constraints"/>2.3. Built-in constraints</h2></div></div></div><p>Hibernate Validator comprises a basic set of commonly used constraints. These are foremost the
constraints defined by the Bean Validation specification (see <a class="xref" href="ch02.html#table-spec-constraints" title="Table 2.2. Bean Validation constraints">Table 2.2, “Bean Validation constraints”</a>).
Additionally, Hibernate Validator provides useful custom constraints (see
<a class="xref" href="ch02.html#table-custom-constraints" title="Table 2.3. Custom constraints">Table 2.3, “Custom constraints”</a> and <a class="xref" href="ch02.html#table-custom-country-constraints" title="Table 2.4. Custom country specific constraints">Table 2.4, “Custom country specific constraints”</a>).</p><div class="section" title="2.3.1. Bean Validation constraints"><div class="titlepage"><div><div><h3 class="title"><a id="validator-defineconstraints-spec"/>2.3.1. Bean Validation constraints</h3></div></div></div><p><a class="xref" href="ch02.html#table-spec-constraints" title="Table 2.2. Bean Validation constraints">Table 2.2, “Bean Validation constraints”</a> shows purpose and supported data types of all constraints specified in
the Bean Validation API. All these constraints apply to the field/property level, there are no
class-level constraints defined in the Bean Validation specification. If you are using the Hibernate
object-relational mapper, some of the constraints are taken into account when creating the DDL for
your model (see column "Hibernate metadata impact").</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Hibernate Validator allows some constraints to be applied to more data types than required by the
Bean Validation specification (e.g. <code class="literal">@Max</code> can be applied to strings). Relying on this feature can
impact portability of your application between Bean Validation providers.</p></div><div class="table"><a id="table-spec-constraints"/><p class="title"><strong>Table 2.2. Bean Validation constraints</strong></p><div class="table-contents"><table summary="Bean Validation constraints" border="1"><colgroup><col width="25*" class="col_1"/><col width="25*" class="col_2"/><col width="25*" class="col_3"/><col width="25*" class="col_4"/></colgroup><thead><tr><th align="left" valign="top">Annotation</th><th align="left" valign="top">Supported data types</th><th align="left" valign="top">Use</th><th align="left" valign="top">Hibernate metadata impact</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">@AssertFalse</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code>,
              <code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Checks that the annotated element is
              false</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@AssertTrue</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code>,
              <code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Checks that the annotated element is
              true</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@DecimalMax(value=,inclusive=)</code></p></td><td align="left" valign="top"><p><code class="literal">BigDecimal</code>,
              <code class="literal">BigInteger</code>,
              <code class="literal">CharSequence</code>,
              <code class="literal">byte</code>, <code class="literal">short</code>,
              <code class="literal">int</code>, <code class="literal">long</code> and the
              respective wrappers of the primitive types; Additionally
              supported by HV: any sub-type of
              <code class="literal">Number</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value is less than the
              specified maximum, when inclusive=false.
              Otherwise whether the value is less than or equal to the
              specified maximum. The parameter value is
              the string representation of the max value according to the
              <code class="literal">BigDecimal</code> string representation.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@DecimalMin(value=,inclusive=)</code></p></td><td align="left" valign="top"><p><code class="literal">BigDecimal</code>,
              <code class="literal">BigInteger</code>,
              <code class="literal">CharSequence</code>,
              <code class="literal">byte</code>, <code class="literal">short</code>,
              <code class="literal">int</code>, <code class="literal">long</code> and the
              respective wrappers of the primitive types; Additionally
              supported by HV: any sub-type of
              <code class="literal">Number</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value is larger than the
              specified minimum, when inclusive=false.
              Otherwise whether the value is larger than or equal to the
              specified minimum. The parameter value is
              the string representation of the min value according to the
              <code class="literal">BigDecimal</code> string representation.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Digits(integer=,fraction=)</code></p></td><td align="left" valign="top"><p>BigDecimal,
              <code class="literal">BigInteger</code>,
              <code class="literal">CharSequence</code>,
              <code class="literal">byte</code>, <code class="literal">short</code>,
              <code class="literal">int</code>, <code class="literal">long</code> and the
              respective wrappers of the primitive types; Additionally
              supported by HV: any sub-type of
              <code class="literal">Number</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value is a number having up to
              <code class="literal">integer</code> digits and
              <code class="literal">fraction</code> fractional digits</p></td><td align="left" valign="top"><p>Defines column precision and scale</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Future</code></p></td><td align="left" valign="top"><p><code class="literal">java.util.Date</code>,
              <code class="literal">java.util.Calendar</code>,
              <code class="literal">java.time.chrono.ChronoZonedDateTime</code>,
              <code class="literal">java.time.Instant</code>,
              <code class="literal">java.time.OffsetDateTime</code>; Additionally
              supported by HV, if the <a class="link" href="http://joda-time.sourceforge.net/">Joda Time</a>
              date/time API is on the class path: any implementations of
              <code class="literal">ReadablePartial</code> and
              <code class="literal">ReadableInstant</code></p></td><td align="left" valign="top"><p>Checks whether the annotated date is in the
              future</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Max(value=)</code></p></td><td align="left" valign="top"><p><code class="literal">BigDecimal</code>,
              <code class="literal">BigInteger</code>, <code class="literal">byte</code>,
              <code class="literal">short</code>, <code class="literal">int</code>,
              <code class="literal">long</code> and the respective wrappers of the
              primitive types; Additionally supported by HV: any sub-type of
              <code class="literal">CharSequence</code> (the numeric value
              represented by the character sequence is evaluated), any
              sub-type of <code class="literal">Number</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value is less than or equal
              to the specified maximum</p></td><td align="left" valign="top"><p>Adds a check constraint on the column</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Min(value=)</code></p></td><td align="left" valign="top"><p><code class="literal">BigDecimal</code>,
              <code class="literal">BigInteger</code>, <code class="literal">byte</code>,
              <code class="literal">short</code>, <code class="literal">int</code>,
              <code class="literal">long</code> and the respective wrappers of the
              primitive types; Additionally supported by HV: any sub-type of
              <code class="literal">CharSequence</code> (the numeric value
              represented by the char sequence is evaluated), any sub-type of
              <code class="literal">Number</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value is higher than or
              equal to the specified minimum</p></td><td align="left" valign="top"><p>Adds a check constraint on the column</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@NotNull</code></p></td><td align="left" valign="top"><p>Any type</p></td><td align="left" valign="top"><p>Checks that the annotated value is not
              <code class="literal">null</code>.</p></td><td align="left" valign="top"><p>Column(s) are not nullable</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Null</code></p></td><td align="left" valign="top"><p>Any type</p></td><td align="left" valign="top"><p>Checks that the annotated value is
              <code class="literal">null</code></p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Past</code></p></td><td align="left" valign="top"><p><code class="literal">java.util.Date</code>,
              <code class="literal">java.util.Calendar</code>,
              <code class="literal">java.time.chrono.ChronoZonedDateTime</code>,
              <code class="literal">java.time.Instant</code>,
              <code class="literal">java.time.OffsetDateTime</code>; Additionally
              supported by HV, if the <a class="link" href="http://joda-time.sourceforge.net/">Joda Time</a>
              date/time API is on the class path: any implementations of
              <code class="literal">ReadablePartial</code> and
              <code class="literal">ReadableInstant</code></p></td><td align="left" valign="top"><p>Checks whether the annotated date is in the past</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Pattern(regex=,flag=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks if the annotated string matches the regular
              expression <code class="literal">regex</code> considering the given
              flag <code class="literal">match</code></p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Size(min=, max=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code>,
              <code class="literal">Collection</code>, <code class="literal">Map</code>
              and arrays</p></td><td align="left" valign="top"><p>Checks if the annotated element’s size is between <code class="literal">min</code> and
              <code class="literal">max</code> (inclusive)</p></td><td align="left" valign="top"><p>Column length will be set to
              <code class="literal">max</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Valid</code></p></td><td align="left" valign="top"><p>Any non-primitive type</p></td><td align="left" valign="top"><p>Performs validation recursively on the associated object.
              If the object is a collection or an array, the elements are
              validated recursively. If the object is a map, the value
              elements are validated recursively.</p></td><td align="left" valign="top"><p>None</p></td></tr></tbody></table></div></div><br class="table-break"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>On top of the parameters indicated in <a class="xref" href="ch02.html#table-spec-constraints" title="Table 2.2. Bean Validation constraints">Table 2.2, “Bean Validation constraints”</a> each constraint has the parameters
message, groups and payload. This is a requirement of the Bean Validation specification.</p></div></div><div class="section" title="2.3.2. Additional constraints"><div class="titlepage"><div><div><h3 class="title"><a id="validator-defineconstraints-hv-constraints"/>2.3.2. Additional constraints</h3></div></div></div><p>In addition to the constraints defined by the Bean Validation API Hibernate Validator provides
several useful custom constraints which are listed in <a class="xref" href="ch02.html#table-custom-constraints" title="Table 2.3. Custom constraints">Table 2.3, “Custom constraints”</a>. With one
exception also these constraints apply to the field/property level, only <code class="literal">@ScriptAssert</code> is a class-
level constraint.</p><div class="table"><a id="table-custom-constraints"/><p class="title"><strong>Table 2.3. Custom constraints</strong></p><div class="table-contents"><table summary="Custom constraints" border="1"><colgroup><col width="25*" class="col_1"/><col width="25*" class="col_2"/><col width="25*" class="col_3"/><col width="25*" class="col_4"/></colgroup><thead><tr><th align="left" valign="top">Annotation</th><th align="left" valign="top">Supported data types</th><th align="left" valign="top">Use</th><th align="left" valign="top">Hibernate metadata impact</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">@CreditCardNumber(ignoreNonDigitCharacters=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence passes the
 Luhn checksum test. Note, this validation aims to check for user
 mistakes, not credit card validity! See also
 <a class="link" href="http://www.merriampark.com/anatomycc.htm">Anatomy of Credit Card Numbers</a>. <code class="literal">ignoreNonDigitCharacters</code>
 allows to ignore non digit characters. The default is <code class="literal">false</code>.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@EAN</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence is a valid
<a class="link" href="http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29">EAN</a> barcode.
type determines the type of barcode. The default is EAN-13.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Email</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks whether the specified character sequence is a valid email address. The optional parameters
<code class="literal">regexp</code> and <code class="literal">flags</code> allow to specify an additional regular expression (including regular expression
flags) which the email must match.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Length(min=,<br/>
         max=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Validates that the annotated character sequence is
              between <code class="literal">min</code> and
              <code class="literal">max</code> included</p></td><td align="left" valign="top"><p>Column length will be set to max</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@LuhnCheck(startIndex= ,<br/>
            endIndex=,<br/>
            checkDigitIndex=,<br/>
            ignoreNonDigitCharacters=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the digits within the annotated character
sequence pass the Luhn checksum algorithm (see also
<a class="link" href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn algorithm</a>). <code class="literal">startIndex</code> and
<code class="literal">endIndex</code> allow to only run the algorithm on
the specified sub-string. <code class="literal">checkDigitIndex</code>
allows to use an arbitrary digit within the character sequence
as the check digit. If not specified it is assumed that the
check digit is part of the specified range. Last but not least,
<code class="literal">ignoreNonDigitCharacters</code> allows to ignore
non digit characters.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Mod10Check(multiplier=,<br/>
             weight=,<br/>
             startIndex=,<br/>
             endIndex=,<br/>
             checkDigitIndex=,<br/>
             ignoreNonDigitCharacters=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the digits within the annotated character
sequence pass the generic mod 10 checksum algorithm.
<code class="literal">multiplier</code> determines the multiplier for
odd numbers (defaults to 3), <code class="literal">weight</code> the
weight for even numbers (defaults to 1).
<code class="literal">startIndex</code> and
<code class="literal">endIndex</code> allow to only run the algorithm on
the specified sub-string. <code class="literal">checkDigitIndex</code>
allows to use an arbitrary digit within the character sequence
as the check digit. If not specified it is assumed that the
check digit is part of the specified range. Last but not least,
<code class="literal">ignoreNonDigitCharacters</code> allows to ignore
non digit characters.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Mod11Check(threshold=,<br/>
             startIndex=,<br/>
             endIndex=,<br/>
             checkDigitIndex=,<br/>
             ignoreNonDigitCharacters=,<br/>
             treatCheck10As=,<br/>
             treatCheck11As=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the digits within the annotated character
sequence pass the mod 11 checksum algorithm.
<code class="literal">threshold</code> specifies the threshold for the
mod11 multiplier growth; if no value is specified the multiplier
will grow indefinitely. <code class="literal">treatCheck10As</code>
and <code class="literal">treatCheck11As</code> specify the check
digits to be used when the mod 11 checksum equals 10 or 11,
respectively. Default to X and 0, respectively.
<code class="literal">startIndex</code>, <code class="literal">endIndex</code>
<code class="literal">checkDigitIndex</code> and
<code class="literal">ignoreNonDigitCharacters</code> carry the same
semantics as in <code class="literal">@Mod10Check</code>.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@NotBlank</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence is not null
and the trimmed length is greater than 0. The difference to
<code class="literal">@NotEmpty</code> is that this constraint can
only be applied on strings and that trailing white-spaces are
ignored.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@NotEmpty</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code>, <code class="literal">Collection</code>, <code class="literal">Map</code> and arrays</p></td><td align="left" valign="top"><p>Checks whether the annotated element is not null nor empty</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@Range(min=,<br/>
        max=)</code></p></td><td align="left" valign="top"><p><code class="literal">BigDecimal</code>, <code class="literal">BigInteger</code>, <code class="literal">CharSequence</code>, <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">int</code>, <code class="literal">long</code> and the respective wrappers of the
primitive types</p></td><td align="left" valign="top"><p>Checks whether the annotated value lies between (inclusive) the specified minimum and maximum</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@SafeHtml(whitelistType= ,<br/>
           additionalTags=,<br/>
           additionalTagsWithAttributes=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks whether the annotated value
contains potentially malicious fragments such as <code class="literal">&lt;script/&gt;</code>. In order to use this
constraint, the
<a class="link" href="http://jsoup.org/">jsoup</a> library must be part of the class path.
With the <code class="literal">whitelistType</code> attribute a predefined whitelist type can be chosen which can
be refined via <code class="literal">additionalTags</code> or <code class="literal">additionalTagsWithAttributes</code>. The former allows to
add tags without any attributes, whereas the latter allows to specify tags and
optionally allowed attributes using the annotation <code class="literal">@SafeHtml.Tag</code>.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@ScriptAssert(lang=,<br/>
              script=,<br/>
              alias=)</code></p></td><td align="left" valign="top"><p>Any type</p></td><td align="left" valign="top"><p>Checks whether the given script can successfully be
evaluated against the annotated element. In order to use this
constraint, an implementation of the Java Scripting API as
defined by JSR 223 ("Scripting for the
Java<sup>TM</sup> Platform") must part of the
class path. The expressions to be evaluated can be written in
any scripting or expression language, for which a JSR 223
compatible engine can be found in the class path.</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@URL(protocol=,<br/>
      host=,<br/>
      port=,<br/>
      regexp=,<br/>
      flags=)</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks if the annotated character sequence is a valid URL
according to RFC2396. If any of the optional parameters
<code class="literal">protocol</code>, <code class="literal">host</code> or
<code class="literal">port</code> are specified, the corresponding URL
fragments must match the specified values. The optional
parameters <code class="literal">regexp</code> and
<code class="literal">flags</code> allow to specify an additional
regular expression (including regular expression flags) which
the URL must match. Per default this constraint used the <code class="literal">java.net.URL</code> constructor to
verify whether a given string represents a valid URL. A regular expression based version is also
available - <code class="literal">RegexpURLValidator</code> - which can be configured via XML
(see <a class="xref" href="ch07.html#section-mapping-xml-constraints" title="7.2. Mapping constraints via constraint-mappings">Section 7.2, “Mapping constraints via <code class="literal">constraint-mappings</code>”</a>) or a <code class="literal">ConstraintDefinitionContributor</code>
(see <a class="xref" href="ch11.html#section-constraint-definition-contributor" title="11.12.2. Constraint definitions via ConstraintDefinitionContributor">Section 11.12.2, “Constraint definitions via <code class="literal">ConstraintDefinitionContributor</code>”</a>).</p></td><td align="left" valign="top"><p>None</p></td></tr></tbody></table></div></div><br class="table-break"/><div class="section" title="2.3.2.1. Country specific constraints"><div class="titlepage"><div><div><h4 class="title"><a id="_country_specific_constraints"/>2.3.2.1. Country specific constraints</h4></div></div></div><p>Hibernate Validator offers also some country specific constraints, e.g. for the validation of social
security numbers.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>If you have to implement a country specific constraint, consider making it a contribution to
Hibernate Validator!</p></div><div class="table"><a id="table-custom-country-constraints"/><p class="title"><strong>Table 2.4. Custom country specific constraints</strong></p><div class="table-contents"><table summary="Custom country specific constraints" border="1"><colgroup><col width="20*" class="col_1"/><col width="20*" class="col_2"/><col width="20*" class="col_3"/><col width="20*" class="col_4"/><col width="20*" class="col_5"/></colgroup><thead><tr><th align="left" valign="top">Annotation</th><th align="left" valign="top">Supported data types</th><th align="left" valign="top">Use</th><th align="left" valign="top">Country</th><th align="left" valign="top">Hibernate metadata impact</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">@CNPJ</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence represents
                a Brazilian corporate tax payer registry number (Cadastro de
                Pessoa Juríeddica)</p></td><td align="left" valign="top"><p>Brazil</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@CPF</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence represents
                a Brazilian individual taxpayer registry number (Cadastro de
                Pessoa Fídsica)</p></td><td align="left" valign="top"><p>Brazil</p></td><td align="left" valign="top"><p>None</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">@TituloEleitoral</code></p></td><td align="left" valign="top"><p><code class="literal">CharSequence</code></p></td><td align="left" valign="top"><p>Checks that the annotated character sequence represents
                a Brazilian voter ID card number (<a class="link" href="http://ghiorzi.org/cgcancpf.htm">Título Eleitoral</a>)</p></td><td align="left" valign="top"><p>Brazil</p></td><td align="left" valign="top"><p>None</p></td></tr></tbody></table></div></div><br class="table-break"/><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p>In some cases neither the Bean Validation constraints nor the custom constraints provided by
Hibernate Validator will fulfill your requirements. In this case you can easily write your own
constraint. You can find more information in <a class="xref" href="ch06.html" title="Chapter 6. Creating custom constraints">Chapter 6, <em>Creating custom constraints</em></a>.</p></div></div></div></div></div><script xmlns="" xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="highlight.js/highlight.pack.js"> </script><script xmlns="" xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">hljs.initHighlightingOnLoad();</script><script type="text/javascript">
dataLayer = [{'channel' : 'Hibernate', 'additional_tracking_code' : 'UA-45270411-3'}];
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJWS5L');</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJWS5L" height="0" width="0" style="display:none;visibility:hidden"> </iframe></noscript><hr xmlns="" xmlns:d="http://docbook.org/ns/docbook"/><a xmlns="" xmlns:d="http://docbook.org/ns/docbook" href="legalnotice.html"/><ul class="docnav"><li class="previous"><a accesskey="p" href="ch01.html"><strong>Prev</strong>Chapter 1. Getting started</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="ch03.html"><strong>Next</strong>Chapter 3. Declaring and validating method constr...</a></li></ul></body></html>